# Dealing with WebView from 2011

In the application Cupid-4-Stupid that I and my partner David W. Corrigan developed, we notice that WebView stopped working properly.
When WebView stopped working as before, two important sections of our application were affected: Date Ideas and Panic Button.

I was getting exceptions such as NullPointerException produced by android.webkit.WebViewDatabase.getInstance() at WebViewDatabase.java.
After fixing this issue, we encounter other exceptions produced by CookieSyncManager.createInstance(Context) and more.

However, after doing some research, we managed to pin point the issue and fixed.

The following is a tutorial about how to create your own browser using WebView and make it work:
We assume that the browser is going to be an activity that will be called from another activity; however, that doesn't mean that it cannot be your main activity if you wish.

    In your AndroidManifest.xml:
         Add the following code before or after the 'application' tag:

        <uses-permission android:name="android.permission.INTERNET" />

        Next, add your browser activity tag.

        <activity android:name="com.hourglass.applications.BrowserActivity"
            android:theme="@android:style/Theme.NoTitleBar">
        	<intent-filter>
        		<action android:name="com.hourglass.applications.Browser" />
        		<action	android:name="android.intent.action.VIEW" />
        		<category android:name="android.intent.category.DEFAULT" />
        		<data android:scheme="http" />
        	</intent-filter>
        </activity>

    Create the layout for your browser.
    Notice that we identify the root linear layout as 'linearLayoutRootWebView' and our WebView as 'webview'. Both ids are important.

    <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout android:id="@+id/linearLayoutRootWebView" xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_height="fill_parent"
        android:layout_width="fill_parent"
        android:background="@android:color/white">

    	<WebView android:id="@+id/webview"
    	android:layout_width="fill_parent"
    	android:layout_height="fill_parent"></WebView>

    </LinearLayout>

    In your main activity under onCreate() method, add the following line at the end:
    This is part of the solution to solve the exception created by CookieSyncManager.createInstance(Context).

    CookieSyncManager.createInstance(this);

    Here is the most important part, your browser activity:
    First, you should notice that we added CookieSyncManager.getInstance().startSync(); inside onResume() method, and CookieSyncManager.getInstance().stopSync(); inside onStop() method. Again, this is to prevent the exception created by CookieSyncManager.createInstance(Context). Plus, using this method makes the loading of our pages more efficient.
    Second, the method setUpWebView() is the most important part. We tried using webview = (WebView) findViewById(R.id.webview); and other examples; however, replacing the webview provided by the resources by a webview generated by code seems to work and not generate any exceptions.

